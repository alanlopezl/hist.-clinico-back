"use strict";(self.webpackChunkFrontEnd_Historial_Clinico=self.webpackChunkFrontEnd_Historial_Clinico||[]).push([[203],{3203:(V,_,n)=>{n.r(_),n.d(_,{CitasModule:()=>K});var r=n(6814),m=n(3403),g=n(9347),Z=n(3808),h=n(2199),t=n(5879),T=n(35),A=n(2322),x=n(6405),v=n(3365),b=n(931),I=n(6116),M=n(617),f=n(2296),C=n(5195),U=n(2032),p=n(9157),S=n(5940),u=n(7988),l=n(6223);function N(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"button",12),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.crear())}),t.TgZ(1,"mat-icon"),t._uU(2," account_circle "),t.qZA(),t._uU(3," Agregar "),t.qZA()}}function y(i,c){1&i&&(t.TgZ(0,"div",13),t._UZ(1,"mat-spinner"),t.qZA())}function E(i,c){1&i&&(t.TgZ(0,"div")(1,"div",20),t._uU(2," No tiene citas asignadas "),t.qZA()())}function w(i,c){1&i&&(t.TgZ(0,"th",32),t._uU(1,"Opciones"),t.qZA())}function L(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"button",42),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2).$implicit,a=t.oxw(4);return t.KtG(a.eliminar(s.ID_CITA))}),t.TgZ(1,"mat-icon"),t._uU(2,"delete_forever"),t.qZA()()}}function O(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"td",36)(1,"div",37)(2,"button",38)(3,"mat-icon"),t._uU(4,"medication"),t.qZA()(),t.TgZ(5,"mat-menu",null,39)(7,"button",40),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().$implicit,a=t.oxw(4);return t.KtG(a.editar(s))}),t.TgZ(8,"mat-icon"),t._uU(9,"edit"),t.qZA(),t.TgZ(10,"span"),t._uU(11,"Editar cita"),t.qZA()(),t.TgZ(12,"button",40),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().$implicit,a=t.oxw(4);return t.KtG(a.confirmateDate(s.ID_CITA))}),t.TgZ(13,"mat-icon"),t._uU(14,"how_to_reg"),t.qZA(),t.TgZ(15,"span"),t._uU(16,"Confirmar cita"),t.qZA()(),t.TgZ(17,"button",40),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().$implicit,a=t.oxw(4);return t.KtG(a.completeDate(s.ID_CITA))}),t.TgZ(18,"mat-icon"),t._uU(19,"done_all"),t.qZA(),t.TgZ(20,"span"),t._uU(21,"Concluir cita"),t.qZA()()(),t.YNc(22,L,3,0,"button",41),t.qZA()()}if(2&i){const e=t.MAs(6),o=t.oxw(5);t.xp6(2),t.Q6J("matMenuTriggerFor",e),t.xp6(20),t.Q6J("ngIf","SI"==(null==o.permisos?null:o.permisos.ELIMINAR))}}function J(i,c){if(1&i&&(t.TgZ(0,"tr",33)(1,"td",34),t._uU(2),t.qZA(),t.TgZ(3,"td",34),t._uU(4),t.qZA(),t.TgZ(5,"td",34),t._uU(6),t.qZA(),t.TgZ(7,"td",34),t._uU(8),t.qZA(),t.TgZ(9,"td",34),t._uU(10),t.ALo(11,"date"),t.qZA(),t.YNc(12,O,23,2,"td",35),t.qZA()),2&i){const e=c.$implicit,o=c.index,s=t.oxw(4);t.uIk("data-index",o),t.xp6(2),t.hij(" ",o+1,""),t.xp6(2),t.AsE(" ",e.PRIMER_NOMBRE," ",e.PRIMER_APELLIDO,""),t.xp6(2),t.hij(" ",e.MOTIVO,""),t.xp6(2),t.hij(" ",e.NOMBRE,""),t.xp6(2),t.hij(" ",t.xi3(11,8,e.FECHA_CITA,"medium"),""),t.xp6(2),t.Q6J("ngIf","SI"==(null==s.permisos?null:s.permisos.ACTUALIZAR)||"SI"==(null==s.permisos?null:s.permisos.ELIMINAR))}}const F=function(i){return[25,50,100,i]};function q(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"div",23)(1,"table",24)(2,"thead",25)(3,"tr",26)(4,"th",27),t._uU(5,"Id"),t.qZA(),t.TgZ(6,"th",27),t._uU(7,"Paciente"),t.qZA(),t.TgZ(8,"th",27),t._uU(9,"Motivo"),t.qZA(),t.TgZ(10,"th",27),t._uU(11,"Estado"),t.qZA(),t.TgZ(12,"th",27),t._uU(13,"Fecha cita"),t.qZA(),t.YNc(14,w,2,0,"th",28),t.qZA()(),t.TgZ(15,"tbody",29),t.YNc(16,J,13,11,"tr",30),t.ALo(17,"slice"),t.ALo(18,"async"),t.qZA()(),t.TgZ(19,"mat-paginator",31),t.NdJ("page",function(s){t.CHM(e);const a=t.oxw(3);return t.KtG(a.cambioPagina(s))}),t.ALo(20,"async"),t.ALo(21,"async"),t.qZA()()}if(2&i){const e=t.oxw(3);let o,s;t.xp6(14),t.Q6J("ngIf","SI"==(null==e.permisos?null:e.permisos.ACTUALIZAR)||"SI"==(null==e.permisos?null:e.permisos.ELIMINAR)),t.xp6(2),t.Q6J("ngForOf",t.Dn7(17,5,t.lcZ(18,9,e._service.response$),e.d,e.h)),t.xp6(3),t.Q6J("length",null==(o=t.lcZ(20,11,e._service.response$))?null:o.length)("pageSize",e.pageSize)("pageSizeOptions",t.VKq(15,F,null==(s=t.lcZ(21,13,e._service.response$))?null:s.length))}}function j(i,c){if(1&i&&(t.TgZ(0,"div",21),t.YNc(1,q,22,17,"div",22),t.ALo(2,"async"),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",0!=t.lcZ(2,1,e._service.response$).length)}}function D(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"section")(1,"div",7),t._UZ(2,"div",14),t.TgZ(3,"div",15)(4,"mat-form-field",16)(5,"mat-label"),t._uU(6,"Busqueda"),t.qZA(),t.TgZ(7,"input",17),t.NdJ("ngModelChange",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.buscar=s)})("change",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.busqueda())}),t.qZA(),t.TgZ(8,"mat-icon",18),t._uU(9,"search"),t.qZA()()()(),t.YNc(10,E,3,0,"div",11),t.ALo(11,"async"),t.ALo(12,"async"),t.YNc(13,j,3,3,"div",19),t.ALo(14,"async"),t.ALo(15,"async"),t.qZA()}if(2&i){const e=t.oxw();t.xp6(7),t.Q6J("ngModel",e.buscar),t.xp6(3),t.Q6J("ngIf",0==t.lcZ(11,3,e._service.response$).length&&!t.lcZ(12,5,e._service.responseCargando$)),t.xp6(3),t.Q6J("ngIf",!t.lcZ(14,7,e._service.responseCargando$)&&0!=t.lcZ(15,9,e._service.response$).length)}}const $=function(){return["/dashboard"]},P=[{path:"citas",component:(()=>{class i{constructor(e,o,s,a,d,G,B){this._service=e,this._dialog=o,this._bitacora=s,this._sweet=a,this.paginator=d,this._especialidad=G,this._medico=B,this.pageSize=25,this.pageSizeOptions=[25,50,100],this.d=0,this.h=25,this.buscar="",this.campo=["TIPO"],this.reporte=!1,this.data=[],this.item=[],this.permisos=[],this.idMedico=localStorage.getItem("user"),d.itemsPerPageLabel="Cantidad por p\xe1gina",this._especialidad.mostrar(""),this._service.mostrarpermiso(localStorage.getItem("rol"),14),this._service.responsepermiso$.subscribe(k=>{this.permisos=k[0]})}ngOnInit(){this._service.idmedico=parseInt(this.idMedico),this.mostrardta(2)}busqueda(){this._service.mostrarCitasMedico(this.buscar,this.idMedico)}mostrar(e){this._service.idespecialidad=e.value,this._medico.mostrar(e.value)}mostrardta(e){this._service.mostrarCitasMedico(e.value,this.idMedico)}ngOnDestroy(){}cambioPagina(e){this.d=e.pageIndex*e.pageSize,this.h=this.d+e.pageSize}editar(e){const o=new g.vA;o.disableClose=!0,o.autoFocus=!0,o.width="25%",this._dialog.open(h.P),console.log(e),this._service.popForm(e)}confirmateDate(e){this._service.updateStatusOrder(2,e).subscribe(o=>{o.ok?(this._service.mostrarfiltro(this._service.idespecialidad,this.buscar),this._sweet.mensajeSimple("\xa1Cita confirmada!","CITA","success")):(console.log(o),this._sweet.mensajeSimple("No se puede confirmar la cita","CITA","error"))})}completeDate(e){this._service.updateStatusOrder(4,e).subscribe(o=>{o.ok?(this._service.mostrarfiltro(this._service.idespecialidad,this.buscar),this._sweet.mensajeSimple("\xa1Cita concluida!","CITA","success")):(console.log(o),this._sweet.mensajeSimple("No se puede concluir la cita","CITA","error"))})}crear(){this._service.soloMisCitas=!0,this._service.inicializarForm(),this._dialog.open(h.P,{width:"40%",disableClose:!0,autoFocus:!0})}eliminar(e){this._sweet.mensajeConConfirmacion("Eliminar","\xbfDesea eliminar el registro?","warning").then(o=>{console.log(o),o&&this._service.eliminar(e).subscribe(s=>{if(this._service.mostrar(this.buscar),s.ok){let a={operacion:"ELIMINO",fecha:new Date,idusuario:localStorage.getItem("user"),tabla:"CITAS"};this._bitacora.crear(a).subscribe(),this._sweet.mensajeSimple("Eliminado correctamente","CITA","success")}else console.log(s),this._sweet.mensajeSimple("No se puede eliminar","CITA","error")})})}impo(){let s=`\n  <div id="otra">\n  <img src="../../../assets/logo.jpg" alt="">\n  <div class="parraf">\n  <h5></h5>\n  <h5>Listado de Pacientes</h5>\n  <h6>${(new Date).toLocaleString()}</h6>\n  </div>\n  </div><br>`;Z({printable:"reporte2",type:"html",header:s,css:"https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css",style:"@page {   margin-left: 10%; } #otra {display: block  } #otra img { max-width: 140px;} .parraf { width: 100%; padding: 0px; text-align: center;  max-height: 80px, margin-left: 90%; }",scanStyles:!1,documentTitle:"Pacientes",font_size:"10pt",ignoreElements:["d"]});let a={operacion:"DESCARGO PDF",fecha:new Date,idusuario:localStorage.getItem("user"),tabla:"PACIENTES"};this._bitacora.crear(a).subscribe(d=>d)}static#t=this.\u0275fac=function(o){return new(o||i)(t.Y36(T.P),t.Y36(g.uw),t.Y36(A.U),t.Y36(x.T),t.Y36(v.ye),t.Y36(b.I),t.Y36(I.D))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-citas"]],decls:28,vars:9,consts:[[1,"col-lg-6"],["aria-label","breadcrumb"],[1,"text"],[1,"breadcrumb"],[1,"breadcrumb-item"],[3,"routerLink"],[1,"breadcrumb-item","active"],[1,"row"],[1,"col-md-4"],["mat-raised-button","","color","accent","class","m-1 botonnegro",3,"click",4,"ngIf"],["style","display: flex; align-items: center; justify-content: center;",4,"ngIf"],[4,"ngIf"],["mat-raised-button","","color","accent",1,"m-1","botonnegro",3,"click"],[2,"display","flex","align-items","center","justify-content","center"],[1,"col-md-6"],[1,"col-md-6","d-flex","justify-content-end"],["appearance","outline"],["matInput","","placeholder","Buscar",3,"ngModel","ngModelChange","change"],["matSuffix",""],["class","mt-4",4,"ngIf"],["role","alert",1,"alert","alert-warning","text-center"],[1,"mt-4"],["id","reporte","class","table-responsive",4,"ngIf"],["id","reporte",1,"table-responsive"],["role","table",1,"table","bordeTabla","tablep"],[1,"theadp"],[1,"botonnegro","text-center"],["scope","col","role","columnheader",1,"thp"],["id","d","class","thp","scope","col","role","columnheader",4,"ngIf"],["role","rowgroup",1,"tbodyp"],["class","text-center trp","role","row",4,"ngFor","ngForOf"],["id","d",3,"length","pageSize","pageSizeOptions","page"],["id","d","scope","col","role","columnheader",1,"thp"],["role","row",1,"text-center","trp"],["role","cell","data-title","Nombre",1,"tdp"],["id","d","role","cell","data-title","Opciones","class","tdp",4,"ngIf"],["id","d","role","cell","data-title","Opciones",1,"tdp"],[1,"text-center"],["title","Tratamiento","mat-mini-fab","",1,"botonnegro",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","","aria-label","Example icon-button with a menu",3,"click"],["mat-mini-fab","","color","warn",3,"click",4,"ngIf"],["mat-mini-fab","","color","warn",3,"click"]],template:function(o,s){1&o&&(t.TgZ(0,"div")(1,"div",0)(2,"nav",1)(3,"h1")(4,"strong",2),t._uU(5,"Citas medicas"),t.qZA()(),t.TgZ(6,"ol",3)(7,"li",4)(8,"a",5),t._uU(9,"Inicio"),t.qZA()(),t.TgZ(10,"li",6)(11,"a"),t._uU(12,"Citas"),t.qZA()()()()(),t.TgZ(13,"mat-card")(14,"mat-card-content")(15,"h5")(16,"strong"),t._uU(17,"Citas medicas"),t.qZA()(),t.TgZ(18,"div",7)(19,"div",8),t.YNc(20,N,4,0,"button",9),t.qZA()()()(),t._UZ(21,"br"),t.TgZ(22,"mat-card")(23,"mat-card-content"),t.YNc(24,y,2,0,"div",10),t.ALo(25,"async"),t.YNc(26,D,16,11,"section",11),t.ALo(27,"async"),t.qZA()()()),2&o&&(t.xp6(8),t.Q6J("routerLink",t.DdM(8,$)),t.xp6(12),t.Q6J("ngIf","SI"==(null==s.permisos?null:s.permisos.INSERTAR)),t.xp6(4),t.Q6J("ngIf",t.lcZ(25,4,s._service.responseCargando$)),t.xp6(2),t.Q6J("ngIf",!t.lcZ(27,6,s._service.responseCargando$)))},dependencies:[r.sg,r.O5,m.rH,M.Hw,f.lW,f.nh,C.a8,C.dn,U.Nt,p.KE,p.hX,p.R9,S.Ou,v.NW,u.VK,u.OP,u.p6,l.Fj,l.JJ,l.On,r.Ov,r.OU,r.uU]})}return i})()}];let Y=(()=>{class i{static#t=this.\u0275fac=function(o){return new(o||i)};static#e=this.\u0275mod=t.oAB({type:i});static#i=this.\u0275inj=t.cJS({imports:[m.Bz.forChild(P),m.Bz]})}return i})();var R=n(5089),z=n(4104),H=n(5986),Q=n(7466);let K=(()=>{class i{static#t=this.\u0275fac=function(o){return new(o||i)};static#e=this.\u0275mod=t.oAB({type:i});static#i=this.\u0275inj=t.cJS({imports:[r.ez,Y,R.q,l.u5,l.UX,z.Nh,H.p9,Q.Fk]})}return i})()}}]);