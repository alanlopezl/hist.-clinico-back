"use strict";(self.webpackChunkFrontEnd_Historial_Clinico=self.webpackChunkFrontEnd_Historial_Clinico||[]).push([[203],{3203:(G,u,o)=>{o.r(u),o.d(u,{CitasModule:()=>D});var r=o(6814),m=o(3403),v=o(3808),t=o(5879),f=o(35),Z=o(9347),C=o(2322),x=o(6405),g=o(3365),A=o(931),T=o(6116),I=o(617),h=o(2296),_=o(5195),b=o(2032),p=o(9157),y=o(5940),l=o(6223);function S(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",12),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.crear())}),t.TgZ(1,"mat-icon"),t._uU(2," account_circle "),t.qZA(),t._uU(3," Agregar "),t.qZA()}}function U(i,a){1&i&&(t.TgZ(0,"div",13),t._UZ(1,"mat-spinner"),t.qZA())}function L(i,a){1&i&&(t.TgZ(0,"div")(1,"div",20),t._uU(2," Seleccione el medico y su especialidad "),t.qZA()())}function N(i,a){1&i&&(t.TgZ(0,"th",32),t._uU(1,"Opciones"),t.qZA())}function E(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",40),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit,c=t.oxw(4);return t.KtG(c.eliminar(n.ID_CITA))}),t.TgZ(1,"mat-icon"),t._uU(2,"delete_forever"),t.qZA()()}}function M(i,a){if(1&i&&(t.TgZ(0,"td",36)(1,"div",37)(2,"button",38)(3,"mat-icon"),t._uU(4,"medication"),t.qZA()(),t.YNc(5,E,3,0,"button",39),t.qZA()()),2&i){const e=t.oxw().$implicit,s=t.oxw(4);t.xp6(2),t.Q6J("queryParams",e),t.xp6(3),t.Q6J("ngIf","SI"==(null==s.permisos?null:s.permisos.ELIMINAR))}}function J(i,a){if(1&i&&(t.TgZ(0,"tr",33)(1,"td",34),t._uU(2),t.qZA(),t.TgZ(3,"td",34),t._uU(4),t.qZA(),t.TgZ(5,"td",34),t._uU(6),t.qZA(),t.TgZ(7,"td",34),t._uU(8),t.ALo(9,"date"),t.qZA(),t.YNc(10,M,6,2,"td",35),t.qZA()),2&i){const e=a.$implicit,s=a.index,n=t.oxw(4);t.uIk("data-index",s),t.xp6(2),t.hij(" ",s+1,""),t.xp6(2),t.AsE(" ",e.PRIMER_NOMBRE," ",e.PRIMER_APELLIDO,""),t.xp6(2),t.hij(" ",e.MOTIVO,""),t.xp6(2),t.hij(" ",t.xi3(9,7,e.FECHA_CITA,"medium"),""),t.xp6(2),t.Q6J("ngIf","SI"==(null==n.permisos?null:n.permisos.ACTUALIZAR)||"SI"==(null==n.permisos?null:n.permisos.ELIMINAR))}}const O=function(i){return[25,50,100,i]};function F(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",23)(1,"table",24)(2,"thead",25)(3,"tr",26)(4,"th",27),t._uU(5,"Id"),t.qZA(),t.TgZ(6,"th",27),t._uU(7,"Paciente"),t.qZA(),t.TgZ(8,"th",27),t._uU(9,"Motivo"),t.qZA(),t.TgZ(10,"th",27),t._uU(11,"Fecha cita"),t.qZA(),t.YNc(12,N,2,0,"th",28),t.qZA()(),t.TgZ(13,"tbody",29),t.YNc(14,J,11,10,"tr",30),t.ALo(15,"slice"),t.ALo(16,"async"),t.qZA()(),t.TgZ(17,"mat-paginator",31),t.NdJ("page",function(n){t.CHM(e);const c=t.oxw(3);return t.KtG(c.cambioPagina(n))}),t.ALo(18,"async"),t.ALo(19,"async"),t.qZA()()}if(2&i){const e=t.oxw(3);let s,n;t.xp6(12),t.Q6J("ngIf","SI"==(null==e.permisos?null:e.permisos.ACTUALIZAR)||"SI"==(null==e.permisos?null:e.permisos.ELIMINAR)),t.xp6(2),t.Q6J("ngForOf",t.Dn7(15,5,t.lcZ(16,9,e._service.response$),e.d,e.h)),t.xp6(3),t.Q6J("length",null==(s=t.lcZ(18,11,e._service.response$))?null:s.length)("pageSize",e.pageSize)("pageSizeOptions",t.VKq(15,O,null==(n=t.lcZ(19,13,e._service.response$))?null:n.length))}}function P(i,a){if(1&i&&(t.TgZ(0,"div",21),t.YNc(1,F,20,17,"div",22),t.ALo(2,"async"),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",0!=t.lcZ(2,1,e._service.response$).length)}}function Y(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"section")(1,"div",7),t._UZ(2,"div",14),t.TgZ(3,"div",15)(4,"mat-form-field",16)(5,"mat-label"),t._uU(6,"Busqueda"),t.qZA(),t.TgZ(7,"input",17),t.NdJ("ngModelChange",function(n){t.CHM(e);const c=t.oxw();return t.KtG(c.buscar=n)})("change",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.busqueda())}),t.qZA(),t.TgZ(8,"mat-icon",18),t._uU(9,"search"),t.qZA()()()(),t.YNc(10,L,3,0,"div",11),t.ALo(11,"async"),t.ALo(12,"async"),t.YNc(13,P,3,3,"div",19),t.ALo(14,"async"),t.ALo(15,"async"),t.qZA()}if(2&i){const e=t.oxw();t.xp6(7),t.Q6J("ngModel",e.buscar),t.xp6(3),t.Q6J("ngIf",0==t.lcZ(11,3,e._service.response$).length&&!t.lcZ(12,5,e._service.responseCargando$)),t.xp6(3),t.Q6J("ngIf",!t.lcZ(14,7,e._service.responseCargando$)&&0!=t.lcZ(15,9,e._service.response$).length)}}const w=function(){return["/dashboard"]},$=[{path:"citas",component:(()=>{class i{constructor(e,s,n,c,d,H,B){this._service=e,this._dialog=s,this._bitacora=n,this._sweet=c,this.paginator=d,this._especialidad=H,this._medico=B,this.pageSize=25,this.pageSizeOptions=[25,50,100],this.d=0,this.h=25,this.buscar="",this.campo=["TIPO"],this.reporte=!1,this.data=[],this.item=[],this.permisos=[],d.itemsPerPageLabel="Cantidad por p\xe1gina",this._especialidad.mostrar(""),this._service.mostrarpermiso(localStorage.getItem("rol"),14),this._service.responsepermiso$.subscribe(K=>{this.permisos=K[0]})}ngOnInit(){this.mostrardta(2)}busqueda(){this._service.mostrarfiltro(11,1,this.buscar)}mostrar(e){this._service.idespecialidad=e.value,this._medico.mostraridespe(e.value)}mostrardta(e){this._service.idmedico=e.value,this._service.mostrarfiltro(this._service.idespecialidad,e.value)}ngOnDestroy(){}cambioPagina(e){this.d=e.pageIndex*e.pageSize,this.h=this.d+e.pageSize}crear(){console.log(this.especialidad),null!=this.especialidad&&null!=this.medico?this._service.inicializarForm():this._sweet.mensajeSimple("Cita","Por favor seleccione los campos","error")}eliminar(e){this._sweet.mensajeConConfirmacion("Eliminar","\xbfDesea eliminar el registro?","warning").then(s=>{console.log(s),s&&this._service.eliminar(e).subscribe(n=>{if(this._service.mostrar(this.buscar),n.ok){let c={operacion:"ELIMINO",fecha:new Date,idusuario:localStorage.getItem("user"),tabla:"CITAS"};this._bitacora.crear(c).subscribe(),this._sweet.mensajeSimple("Eliminado correctamente","CITA","success")}else console.log(n),this._sweet.mensajeSimple("No se puede eliminar","CITA","error")})})}impo(){let n=`\n  <div id="otra">\n  <img src="../../../assets/logo.jpg" alt="">\n  <div class="parraf">\n  <h5></h5>\n  <h5>Listado de Pacientes</h5>\n  <h6>${(new Date).toLocaleString()}</h6>\n  </div>\n  </div><br>`;v({printable:"reporte2",type:"html",header:n,css:"https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css",style:"@page {   margin-left: 10%; } #otra {display: block  } #otra img { max-width: 140px;} .parraf { width: 100%; padding: 0px; text-align: center;  max-height: 80px, margin-left: 90%; }",scanStyles:!1,documentTitle:"Pacientes",font_size:"10pt",ignoreElements:["d"]});let c={operacion:"DESCARGO PDF",fecha:new Date,idusuario:localStorage.getItem("user"),tabla:"PACIENTES"};this._bitacora.crear(c).subscribe(d=>d)}static#t=this.\u0275fac=function(s){return new(s||i)(t.Y36(f.P),t.Y36(Z.uw),t.Y36(C.U),t.Y36(x.T),t.Y36(g.ye),t.Y36(A.I),t.Y36(T.D))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-citas"]],decls:28,vars:9,consts:[[1,"col-lg-6"],["aria-label","breadcrumb"],[1,"text"],[1,"breadcrumb"],[1,"breadcrumb-item"],[3,"routerLink"],[1,"breadcrumb-item","active"],[1,"row"],[1,"col-md-4"],["mat-raised-button","","color","accent","class","m-1 botonnegro",3,"click",4,"ngIf"],["style","display: flex; align-items: center; justify-content: center;",4,"ngIf"],[4,"ngIf"],["mat-raised-button","","color","accent",1,"m-1","botonnegro",3,"click"],[2,"display","flex","align-items","center","justify-content","center"],[1,"col-md-6"],[1,"col-md-6","d-flex","justify-content-end"],["appearance","outline"],["matInput","","placeholder","Buscar",3,"ngModel","ngModelChange","change"],["matSuffix",""],["class","mt-4",4,"ngIf"],["role","alert",1,"alert","alert-warning","text-center"],[1,"mt-4"],["id","reporte","class","table-responsive",4,"ngIf"],["id","reporte",1,"table-responsive"],["role","table",1,"table","bordeTabla","tablep"],[1,"theadp"],[1,"botonnegro","text-center"],["scope","col","role","columnheader",1,"thp"],["id","d","class","thp","scope","col","role","columnheader",4,"ngIf"],["role","rowgroup",1,"tbodyp"],["class","text-center trp","role","row",4,"ngFor","ngForOf"],["id","d",3,"length","pageSize","pageSizeOptions","page"],["id","d","scope","col","role","columnheader",1,"thp"],["role","row",1,"text-center","trp"],["role","cell","data-title","Nombre",1,"tdp"],["id","d","role","cell","data-title","Opciones","class","tdp",4,"ngIf"],["id","d","role","cell","data-title","Opciones",1,"tdp"],[1,"text-center"],["title","Tratamiento","mat-mini-fab","","routerLink","/pacientes/tratamiento",1,"botonnegro",3,"queryParams"],["mat-mini-fab","","color","warn",3,"click",4,"ngIf"],["mat-mini-fab","","color","warn",3,"click"]],template:function(s,n){1&s&&(t.TgZ(0,"div")(1,"div",0)(2,"nav",1)(3,"h1")(4,"strong",2),t._uU(5,"Citas medicas"),t.qZA()(),t.TgZ(6,"ol",3)(7,"li",4)(8,"a",5),t._uU(9,"Inicio"),t.qZA()(),t.TgZ(10,"li",6)(11,"a"),t._uU(12,"Citas"),t.qZA()()()()(),t.TgZ(13,"mat-card")(14,"mat-card-content")(15,"h5")(16,"strong"),t._uU(17,"Citas medicas"),t.qZA()(),t.TgZ(18,"div",7)(19,"div",8),t.YNc(20,S,4,0,"button",9),t.qZA()()()(),t._UZ(21,"br"),t.TgZ(22,"mat-card")(23,"mat-card-content"),t.YNc(24,U,2,0,"div",10),t.ALo(25,"async"),t.YNc(26,Y,16,11,"section",11),t.ALo(27,"async"),t.qZA()()()),2&s&&(t.xp6(8),t.Q6J("routerLink",t.DdM(8,w)),t.xp6(12),t.Q6J("ngIf","SI"==(null==n.permisos?null:n.permisos.INSERTAR)),t.xp6(4),t.Q6J("ngIf",t.lcZ(25,4,n._service.responseCargando$)),t.xp6(2),t.Q6J("ngIf",!t.lcZ(27,6,n._service.responseCargando$)))},dependencies:[r.sg,r.O5,m.rH,I.Hw,h.lW,h.nh,_.a8,_.dn,b.Nt,p.KE,p.hX,p.R9,y.Ou,g.NW,l.Fj,l.JJ,l.On,r.Ov,r.OU,r.uU]})}return i})()}];let q=(()=>{class i{static#t=this.\u0275fac=function(s){return new(s||i)};static#e=this.\u0275mod=t.oAB({type:i});static#i=this.\u0275inj=t.cJS({imports:[m.Bz.forChild($),m.Bz]})}return i})();var R=o(5089),j=o(4104),z=o(5986),Q=o(7466);let D=(()=>{class i{static#t=this.\u0275fac=function(s){return new(s||i)};static#e=this.\u0275mod=t.oAB({type:i});static#i=this.\u0275inj=t.cJS({imports:[r.ez,q,R.q,l.u5,l.UX,j.Nh,z.p9,Q.Fk]})}return i})()}}]);